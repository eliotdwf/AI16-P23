<% if(roleReq === 2 && users.length === 0) { %>
    <div class="d-flex justify-content-center mt-4">
        <div class="col-8 d-flex justify-content-center">
            <%- include("../partials/bs-alert", type="error", message="Aucune demande n'a été trouvée");%>
        </div>
    </div>
<% } else { %>
<div class="table-responsive">
    <table class="table align-middle">
        <thead>
        <tr>
            <th>Email</th>
            <th>Prénom</th>
            <th>Nom</th>
            <th>Tel</th>
            <th>Date céation</th>
            <%if (roleReq === 3) {%>
            <th>Actif</th>
            <th>Rôle</th>
            <% } %>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody class="table-group-divider">
        <% users.forEach((user)=> { %>
            <tr>
                <td>
                    <%= user.email %>
                </td>
                <td>
                    <%= user.prenom %>
                </td>
                <td>
                    <%= user.nom %>
                </td>
                <td>
                    <%= user.tel %>
                </td>
                <td>
                    <%= user.date_creation.toLocaleDateString() %>
                </td>
                <%if (roleReq === 3) {%>
                <td>
                    <%= user.actif ? "Oui" : "Non" %>
                </td>
                <td>
                    <%  let roleUser;
                        switch (user.id_role) {
                            case 1 :
                                roleUser = "Candidat";
                                break;
                            case 2 :
                                roleUser = "Recruteur";
                                break;
                            case 3 :
                                roleUser = "Administrateur";
                                break;
                            default:
                                roleUser = "Inconnu";
                        }%>
                    <%= roleUser %>
                </td>
                <td>
                    <% if(user.id_role != 3) {%>
                     <% if(user.actif){ %>
                            <button onclick="deactivateUserAccount('<%= user.email %>')" class="btn btn-warning col-sm-5">Désactiver</button>
                        <% } else {%>
                            <button onclick="activateUserAccount('<%= user.email %>')" class="btn btn-warning col-sm-5">Activer</button>
                        <% } %>
                        <button onclick="giveAdminRights('<%= user.email %>')" class="btn btn-role">Passer admin</button>
                    <% } else {%>
                        Aucune action pour ce compte
                    <% } %>
                </td>
                <% } else { %>
                    <td>
                        <button class="btn btn-success col-auto" onclick="accepterDemande('<%= user.email %>','<%= user.futur_siren %>')">Ajouter</button>
                        <button class="btn btn-danger col-auto" onclick="refuserDemande('<%= user.email %>','<%= user.futur_siren %>')">Refuser</button>
                    </td>
                <% } %>
            </tr>
        <% }) %>
        </tbody>
    </table>
</div>
<% } %>
